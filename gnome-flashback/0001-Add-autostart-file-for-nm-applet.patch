From 06ba69fa43065b0ed4bf402d33f423b25f85b87e Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Ball=C3=B3=20Gy=C3=B6rgy?= <ballogyor@gmail.com>
Date: Wed, 5 Aug 2015 18:52:10 +0200
Subject: [PATCH] Add autostart file for nm-applet

nm-applet is no loner autostarted in GNOME:
https://git.gnome.org/browse/network-manager-applet/commit/?id=2a7336451cb6f066dd7ea80bf9faed40881b0ebf
---
 data/Makefile.am                          |  6 ++++++
 data/gnome-flashback-nm-applet.desktop.in | 13 +++++++++++++
 2 files changed, 19 insertions(+)
 create mode 100644 data/gnome-flashback-nm-applet.desktop.in

diff --git a/data/Makefile.am b/data/Makefile.am
index 15ff2b9..22611a9 100644
--- a/data/Makefile.am
+++ b/data/Makefile.am
@@ -19,6 +19,10 @@ session_DATA     = $(session_in_files:.session.in=.session)
 
 %.session: %.session.in $(INTLTOOL_MERGE) $(wildcard $(top_srcdir)/po/*.po) ; LC_ALL=C $(INTLTOOL_MERGE) -d -u -c $(top_builddir)/po/.intltool-merge-cache $(top_srcdir)/po $< $@
 
+autostartdir       = $(sysconfdir)/xdg/autostart
+autostart_in_files = gnome-flashback-nm-applet.desktop.in
+autostart_DATA     = $(autostart_in_files:.desktop.in=.desktop)
+
 desktopdir       = $(datadir)/applications
 desktop_in_files = gnome-flashback.desktop.in gnome-flashback-init.desktop.in
 desktop_DATA     = $(desktop_in_files:.desktop.in=.desktop)
@@ -45,6 +49,7 @@ gsettings_SCHEMAS       = $(gsettings_schemas_in:.xml.in=.xml)
 @GSETTINGS_RULES@
 
 EXTRA_DIST = \
+	$(autostart_in_files) \
 	$(desktop_in_files) \
 	$(gsettings_schemas_in_in) \
 	$(menu_DATA) \
@@ -52,6 +57,7 @@ EXTRA_DIST = \
 	$(xsession_in_in_files)
 
 CLEANFILES = \
+	$(autostart_DATA) \
 	$(desktop_DATA) \
 	gnome-flashback-compiz \
 	gnome-flashback-metacity \
diff --git a/data/gnome-flashback-nm-applet.desktop.in b/data/gnome-flashback-nm-applet.desktop.in
new file mode 100644
index 0000000..e6ec0a1
--- /dev/null
+++ b/data/gnome-flashback-nm-applet.desktop.in
@@ -0,0 +1,13 @@
+[Desktop Entry]
+_Name=Network (GNOME Flashback)
+_Comment=Manage your network connections
+Icon=nm-device-wireless
+Exec=nm-applet
+Terminal=false
+Type=Application
+NoDisplay=true
+OnlyShowIn=GNOME-Flashback;
+X-GNOME-Bugzilla-Bugzilla=GNOME
+X-GNOME-Bugzilla-Product=NetworkManager
+X-GNOME-Bugzilla-Component=nm-applet
+X-GNOME-UsesNotifications=true
-- 
2.5.0

